---
import Layout from '../layouts/Layout.astro';
import FeatureCard from '../components/FeatureCard.astro';
import ContactModal from '../components/ContactModal.astro';

// Add Discord client ID
const DISCORD_CLIENT_ID = import.meta.env.DISCORD_CLIENT_ID;

const pageTitle = "Discord Server Fitness Tools | CalorieBot for Admins";
const pageDescription = "Supercharge your Discord fitness server with AI-powered tools. Automated calorie tracking, workout plans, and engagement features to keep your community active and growing.";

// Add structured data properties
const ratingValue = 4.8;
const ratingCount = 127;
const startingPrice = "29.00";
---

<Layout
  title={pageTitle}
  description={pageDescription}
  ratingValue={ratingValue}
  ratingCount={ratingCount}
  price={startingPrice}
  type="website"
  image="/images/for-admins-preview.jpg"
>
  <ContactModal id="contact-modal" />
  <main>
    <section class="relative bg-dark text-white py-16 overflow-hidden">
      <!-- Subtle decorative elements that match the theme -->
      <div class="absolute inset-0" aria-hidden="true">
        <div class="absolute top-0 right-0 w-1/3 h-48 bg-orange-600/5 blur-3xl"></div>
        <div class="absolute bottom-0 left-0 w-1/3 h-48 bg-discord/5 blur-3xl"></div>
      </div>

      <div class="container mx-auto px-4 max-w-4xl relative">
        <h1 class="text-5xl md:text-6xl font-bold mb-6">
          Bring Your Server
          <br />
          <span class="text-orange-500">to Life</span>
        </h1>
        <p class="text-xl md:text-2xl mb-12 text-gray-300">Transform your Discord community with fitness-driven engagement</p>

        <div class="grid md:grid-cols-3 gap-8 mb-16">
          <FeatureCard
            title="The Engagement Problem"
            description="Most Discord servers struggle with activity. Interest-based channels alone aren't enough to keep members returning."
            icon="ðŸ’¤"
          />
          <FeatureCard
            title="Social Glue Solution"
            description="Fitness is universal. CalorieBot brings that same magnetic social energy to your Discord server."
            icon="ðŸ§¬"
          />
          <FeatureCard
            title="Daily Engagement"
            description="From AI photo logging to community challenges, we provide tools that keep members coming back daily."
            icon="ðŸ“ˆ"
          />
        </div>

        <div class="mb-16">
          <h2 class="text-3xl font-bold mb-8">Engagement Drivers</h2>
          <div class="grid md:grid-cols-2 gap-8">
            <div class="bg-secondary rounded-lg p-6">
              <h3 class="text-xl font-bold mb-4">Daily Activities</h3>
              <ul class="space-y-3 text-gray-300">
                <li>â€¢ AI Photo Food Logging</li>
                <li>â€¢ Workout Sharing</li>
                <li>â€¢ PR Celebrations</li>
                <li>â€¢ Community Challenges</li>
                <li>â€¢ Progress Tracking</li>
                <li>â€¢ Accountability Groups</li>
              </ul>
            </div>
            <div class="bg-secondary rounded-lg p-6">
              <h3 class="text-xl font-bold mb-4">Why Fitness Works</h3>
              <ul class="space-y-3 text-gray-300">
                <li>â€¢ Creates natural daily check-ins</li>
                <li>â€¢ Builds genuine relationships</li>
                <li>â€¢ Sparks organic conversations</li>
                <li>â€¢ Crosses all interest groups</li>
                <li>â€¢ Gamifies community participation</li>
              </ul>
            </div>
          </div>
        </div>

        <div>
          <h2 class="text-3xl font-bold mb-8">Real Results</h2>
          <div class="grid md:grid-cols-2 gap-8">
            <div class="bg-secondary rounded-lg p-6">
              <h3 class="text-xl font-bold mb-4">Community Impact</h3>
              <ul class="space-y-3 text-gray-300">
                <li>â€¢ Increased daily active users</li>
                <li>â€¢ Higher message frequency</li>
                <li>â€¢ Stronger member relationships</li>
                <li>â€¢ Better retention rates</li>
                <li>â€¢ More vibrant community</li>
              </ul>
            </div>
            <div class="bg-secondary rounded-lg p-6">
              <h3 class="text-xl font-bold mb-4">Server Transformation</h3>
              <ul class="space-y-3 text-gray-300">
                <li>â€¢ Works for gaming communities</li>
                <li>â€¢ Perfect for professional networks</li>
                <li>â€¢ Ideal for interest groups</li>
                <li>â€¢ Adaptable to any community</li>
                <li>â€¢ Easy to implement</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Pricing Section -->
    <section id="pricing" class="py-12 bg-dark">
      <div class="container mx-auto px-4 max-w-5xl">
        <h2 class="text-3xl font-bold text-white text-center mb-12">
          Simple, Transparent Pricing
        </h2>

        <div class="grid gap-6 mx-auto">
          <!-- Free Trial Box -->
          <div class="bg-gradient-to-r from-orange-900/40 to-orange-800/30 rounded-lg p-6 flex flex-col md:flex-row items-center justify-between hover:bg-opacity-80 transition-all border border-orange-500/30">
            <div class="md:w-1/4 text-center md:text-left">
              <h3 class="text-2xl font-bold text-white mb-2">
                Free Trial
              </h3>
              <p class="text-gray-400">Up to 5 members</p>
            </div>

            <div class="md:w-2/4 text-center md:text-left my-4 md:my-0">
              <p class="text-orange-400">Try all features free for 7 days</p>
              <ul class="text-gray-300 list-disc list-inside">
                <li>All core features included</li>
                <li>No credit card required</li>
              </ul>
            </div>

            <div class="md:w-1/4 text-center">
              <a
                href={`https://discord.com/api/oauth2/authorize?client_id=${DISCORD_CLIENT_ID}&permissions=395137251392&scope=bot%20applications.commands`}
                class="inline-block bg-orange-600 hover:bg-orange-500 text-white font-bold py-2 px-6 rounded-full transition-colors"
              >
                Add to Server
              </a>
            </div>
          </div>

          <!-- Starter -->
          <div class="bg-secondary rounded-lg p-6 flex flex-col md:flex-row items-center justify-between hover:bg-opacity-80 transition-all">
            <div class="md:w-1/4 text-center md:text-left">
              <h3 class="text-2xl font-bold text-white mb-2">Starter</h3>
              <p class="text-3xl font-bold text-discord mb-2">$29<span class="text-sm text-gray-400">/month</span></p>
              <p class="text-gray-400">Up to 5 active members</p>
            </div>
            <div class="md:w-2/4 text-center md:text-left my-4 md:my-0">
              <p class="text-gray-300">Perfect for friends & family</p>
              <ul class="text-gray-300 list-disc list-inside">
                <li>All core features included</li>
                <li>AI photo tracking</li>
                <li>Guided workouts</li>
                <li>Challenge system</li>
                <li>$5.80 per user</li>
              </ul>
            </div>
            <div class="md:w-1/4 text-center">
              <button
                class="checkout-button bg-discord hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-full transition-colors"
                data-price-id="price_1QjsjILK64haKytlUJnHI6bo"
              >
                Get Started
              </button>
            </div>
          </div>

          <!-- Growth -->
          <div class="bg-secondary rounded-lg p-6 flex flex-col md:flex-row items-center justify-between hover:bg-opacity-80 transition-all">
            <div class="md:w-1/4 text-center md:text-left">
              <h3 class="text-2xl font-bold text-white mb-2">Growth</h3>
              <p class="text-3xl font-bold text-discord mb-2">$99<span class="text-sm text-gray-400">/month</span></p>
              <p class="text-gray-400">Up to 20 active members</p>
            </div>
            <div class="md:w-2/4 text-center md:text-left my-4 md:my-0">
              <p class="text-gray-300">For growing communities</p>
              <ul class="text-gray-300 list-disc list-inside">
                <li>Everything in Starter +</li>
                <li class="font-bold text-orange-500">Group coaching platform</li>
                <li>Weekly check-in system</li>
                <li>Inactivity alerts</li>
                <li>$4.95 per user</li>
              </ul>
            </div>
            <div class="md:w-1/4 text-center">
              <button
                class="checkout-button bg-discord hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-full transition-colors"
                data-price-id="price_1QjsjFLK64haKytlEccmqs7i"
              >
                Get Started
              </button>
            </div>
          </div>

          {/* Temporarily hidden plans
          <!-- Plus -->
          <div class="bg-secondary rounded-lg p-6 flex flex-col md:flex-row items-center justify-between hover:bg-opacity-80 transition-all">
            <div class="md:w-1/4 text-center md:text-left">
              <h3 class="text-2xl font-bold text-white mb-2">Plus</h3>
              <p class="text-3xl font-bold text-discord mb-2">$249<span class="text-sm text-gray-400">/month</span></p>
              <p class="text-gray-400">Up to 60 active members</p>
            </div>
            <div class="md:w-2/4 text-center md:text-left my-4 md:my-0">
              <p class="text-gray-300">For thriving communities</p>
              <ul class="text-gray-300 list-disc list-inside">
                <li>Everything in Growth +</li>
                <li class="font-bold text-orange-500">1-1 coaching platform</li>
                <li>Assignable coaches</li>
                <li>Priority support</li>
                <li>$4.15 per user</li>
              </ul>
            </div>
            <div class="md:w-1/4 text-center">
              <button
                class="checkout-button bg-discord hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-full transition-colors"
                data-price-id="price_1QjsjKLK64haKytlh1GJPwQb"
              >
                Get Started
              </button>
            </div>
          </div>

          <!-- Pro -->
          <div class="bg-secondary rounded-lg p-6 flex flex-col md:flex-row items-center justify-between hover:bg-opacity-80 transition-all">
            <div class="md:w-1/4 text-center md:text-left">
              <h3 class="text-2xl font-bold text-white mb-2">Pro</h3>
              <p class="text-3xl font-bold text-discord mb-2">$459<span class="text-sm text-gray-400">/month</span></p>
              <p class="text-gray-400">Up to 130 active members</p>
            </div>
            <div class="md:w-2/4 text-center md:text-left my-4 md:my-0">
              <p class="text-gray-300">For growing large communities</p>
              <ul class="text-gray-300 list-disc list-inside">
                <li>Everything in Plus +</li>
                <li>Priority feature requests</li>
                <li>Discount per user</li>
                <li>Setup onboarding</li>
                <li>$3.53 per user</li>
              </ul>
            </div>
            <div class="md:w-1/4 text-center">
              <button
                class="checkout-button bg-discord hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-full transition-colors"
                data-price-id="price_1QkYErLK64haKytlQNHgb9r6"
              >
                Get Started
              </button>
            </div>
          </div>

          <!-- Elite -->
          <div class="bg-secondary rounded-lg p-6 flex flex-col md:flex-row items-center justify-between hover:bg-opacity-80 transition-all">
            <div class="md:w-1/4 text-center md:text-left">
              <h3 class="text-2xl font-bold text-white mb-2">Elite</h3>
              <p class="text-3xl font-bold text-discord mb-2">$999<span class="text-sm text-gray-400">/month</span></p>
              <p class="text-gray-400">Up to 300 active members</p>
            </div>
            <div class="md:w-2/4 text-center md:text-left my-4 md:my-0">
              <p class="text-gray-300">For large communities</p>
              <ul class="text-gray-300 list-disc list-inside">
                <li>Everything in Pro +</li>
                <li>Custom features requests</li>
                <li>Premium support</li>
                <li>Growth mentorship discord</li>
                <li>$3.33 per user</li>
              </ul>
            </div>
            <div class="md:w-1/4 text-center">
              <button
                class="checkout-button bg-discord hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-full transition-colors"
                data-price-id="price_1QjsjBLK64haKytlmgH3MV3i"
              >
                Get Started
              </button>
            </div>
          </div>
          */}

          <!-- Partner -->
          <div class="bg-secondary rounded-lg p-6 flex flex-col md:flex-row items-center justify-between hover:bg-opacity-80 transition-all">
            <div class="md:w-1/4 text-center md:text-left">
              <h3 class="text-2xl font-bold text-white mb-2">Partner</h3>
              <p class="text-3xl font-bold text-discord mb-2">Custom<span class="text-sm text-gray-400"> pricing</span></p>
              <p class="text-gray-400">For large fitness coaching communities</p>
            </div>
            <div class="md:w-2/4 text-center md:text-left my-4 md:my-0">
              <ul class="text-gray-300 list-disc list-inside">
                <li class="font-bold text-orange-500">Enterprise coaching platform suite</li>
                <li>Revenue-sharing partnership model</li>
                <li>Custom server design & branding</li>
                <li>Advanced client monitoring dashboard</li>
                <li>Detailed client progress reports</li>
                <li>Dedicated account manager</li>
                <li>Custom feature development</li>
              </ul>
            </div>
            <div class="md:w-1/4 text-center">
              <button
                onclick="window.openContactModal('contact-modal')"
                class="inline-block bg-discord hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-full transition-colors"
              >
                Contact Us
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
</Layout>

<script define:vars={{ DISCORD_CLIENT_ID }}>
  document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll("[data-price-id]").forEach((button) => {
      button.addEventListener("click", () => {
        const priceId = button.getAttribute("data-price-id");
        const planName = button.closest('.bg-secondary').querySelector('h3').textContent;
        const price = button.closest('.bg-secondary').querySelector('.text-3xl').textContent;

        // Track checkout initiation
        sa_event("checkout_page_visit", {
          price_id: priceId,
          plan_name: planName,
          price: price,
          page: 'admins'
        });

        const params = new URLSearchParams({
          client_id: DISCORD_CLIENT_ID,
          response_type: "code",
          scope: "identify email",
          redirect_uri: "https://caloriebot.ai/oauth/discord/callback",
          state: priceId,
          prompt: "consent",
        });

        const discordUrl = `https://discord.com/api/oauth2/authorize?${params}`;
        window.location.href = discordUrl;
      });
    });
  });
</script>
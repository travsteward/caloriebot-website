---
export const prerender = true;

import Layout from "../layouts/Layout.astro";
import ContactModal from "../components/ContactModal.astro";

// Make DISCORD_CLIENT_ID available to the frontend
const DISCORD_CLIENT_ID = import.meta.env.DISCORD_CLIENT_ID;

const pageTitle = "CalorieBot Revenue Models | Commissions & Premium Coaching";
const pageDescription = "Choose between affiliate commissions or premium coaching business. Earn $12/month per subscriber or charge $80-250/month with 90% profit margins.";

const plans = [
  {
    name: "Starter",
    price: 29,
    period: "/month",
    description: "Perfect for friends & family",
    features: [
      "All core features included",
      "AI photo tracking",
      "Guided workouts",
      "Challenge system",
      "$5.80 per user"
    ],
    priceId: "price_1QjsjILK64haKytlUJnHI6bo",
    hasCheckout: true,
    memberLimit: "Up to 5 active members",
  },
  {
    name: "Growth",
    price: 99,
    period: "/month",
    description: "For growing communities",
    features: [
      "Everything in Starter +",
      "Group coaching platform",
      "Weekly check-in system",
      "Inactivity alerts",
      "$4.95 per user"
    ],
    priceId: "price_1QjsjFLK64haKytlEccmqs7i",
    hasCheckout: true,
    memberLimit: "Up to 20 active members",
  },
  /* Temporarily hidden
  {
    name: "Plus",
    price: 249,
    period: "/month",
    description: "For thriving communities",
    features: [
      "Everything in Growth +",
      "1-1 coaching platform",
      "Assignable coaches",
      "Priority support",
      "$4.15 per user"
    ],
    priceId: "price_1QjsjKLK64haKytlh1GJPwQb",
    hasCheckout: true,
    memberLimit: "Up to 60 active members",
  },
  {
    name: "Pro",
    price: 459,
    period: "/month",
    description: "For growing large communities",
    features: [
      "Everything in Plus +",
      "Priority feature requests",
      "Discount per user",
      "Setup onboarding",
      "$3.53 per user"
    ],
    priceId: "price_1QkYErLK64haKytlQNHgb9r6",
    hasCheckout: true,
    memberLimit: "Up to 130 active members",
  },
  {
    name: "Elite",
    price: 999,
    period: "/month",
    description: "For large communities",
    features: [
      "Everything in Pro +",
      "Custom features requests",
      "Premium support",
      "Growth mentorship discord",
      "$3.33 per user"
    ],
    priceId: "price_1QjsjBLK64haKytlmgH3MV3i",
    hasCheckout: true,
    memberLimit: "Up to 300 active members",
  },
  */
  {
    name: "Partner",
    price: "Custom",
    period: " pricing",
    description: "For large fitness coaching communities",
    features: [
      "Enterprise coaching platform suite",
      "Revenue-sharing partnership model",
      "Custom server design & branding",
      "Advanced client monitoring dashboard",
      "Detailed client progress reports",
      "Dedicated account manager",
      "Custom feature development"
    ],
    hasCheckout: false,
  },
];

// Create structured data for pricing
const priceRange = {
  minPrice: 29,
  maxPrice: 999
};

---

<Layout
  title={pageTitle}
  description={pageDescription}
  type="website"
  image="/images/pricing-preview.jpg"
  price={`${priceRange.minPrice}.00`}
>
  <ContactModal id="contact-modal" />
  <main>
    <section class="relative bg-dark text-white py-20 md:py-32 overflow-hidden">
      <!-- Subtle decorative elements that match the theme -->
      <div class="absolute inset-0" aria-hidden="true">
        <div class="absolute top-[-10%] left-[-10%] w-[40%] h-[40%] rounded-full bg-brand-orange/20 blur-[100px]"></div>
        <div class="absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] rounded-full bg-discord/20 blur-[100px]"></div>
      </div>

      <div class="container mx-auto px-4 max-w-5xl relative z-10">
        <div class="text-center mb-16">
          <h1 class="hero-heading font-extrabold mb-6 tracking-tight">
            Choose Your
            <br />
            <span class="text-transparent bg-clip-text bg-gradient-to-r from-brand-orange to-brand-purple">Revenue Model</span>
          </h1>
          <p class="text-xl md:text-2xl text-gray-400 mb-10 leading-relaxed">Build passive income through commissions or create a premium coaching business</p>

          <!-- Quick Nav Buttons -->
          <div class="flex justify-center mb-12">
            <div class="bg-dark-900 border border-white/10 rounded-full p-2 flex gap-2 shadow-lg">
              <a
                href="#affiliate-model"
                class="px-6 py-3 rounded-full font-semibold transition-all text-white bg-brand-orange hover:bg-brand-orange/90 shadow-lg shadow-brand-orange/20"
                onclick="trackPricingModelInterest('make_money_server', 'quick_nav')"
              >
                üí∞ Make Money Server
              </a>
              <a
                href="#private-model"
                class="px-6 py-3 rounded-full font-semibold transition-all text-gray-300 hover:text-white hover:bg-white/5"
                onclick="trackPricingModelInterest('private_coaching_server', 'quick_nav')"
              >
                üè† Private Coaching Server
              </a>
            </div>
          </div>
        </div>

        <!-- Affiliate Commission Model -->
        <div id="affiliate-model">
          <div class="text-center mb-12">
            <div class="bg-dark-900/50 backdrop-blur-sm rounded-2xl p-8 border border-brand-orange/30 mb-8 max-w-4xl mx-auto relative overflow-hidden">
              <div class="absolute inset-0 bg-brand-orange/5"></div>
              <h2 class="text-4xl md:text-5xl font-bold text-white mb-2 relative z-10">
                <span class="text-brand-orange">üí∞</span> Make Money Server
              </h2>
            </div>
            <p class="text-xl text-gray-400 max-w-3xl mx-auto leading-relaxed">Add CalorieBot to any Discord community (anime, sports, trading, gaming, or any niche). Run profitable 6-week challenges, then build ongoing memberships. 40% of challenge users convert to long-term subscriptions. Earn 60% commission on all revenue.</p>
          </div>
          <div class="grid gap-8 mx-auto mb-24">
            {/* Commission Structure */}
            <div class="bg-dark-900 rounded-3xl p-8 md:p-10 border border-brand-orange/20 shadow-2xl relative overflow-hidden group">
              <div class="absolute top-0 right-0 w-64 h-64 bg-brand-orange/5 rounded-full blur-3xl -mr-32 -mt-32 group-hover:bg-brand-orange/10 transition-all"></div>
              <div class="relative z-10">
                <div class="text-center mb-10">
                  <h3 class="text-3xl font-bold text-white mb-4">Commission Structure</h3>
                  <p class="text-xl text-gray-400">Earn 60% commission on all revenue ‚Ä¢ Challenges & Memberships</p>
                </div>

                <div class="grid md:grid-cols-3 gap-6 text-center mb-8">
                  <div class="bg-dark-800 rounded-2xl p-6 border border-white/5 hover:border-white/10 transition-colors">
                    <div class="text-3xl font-bold text-brand-orange mb-2">$47-147</div>
                    <div class="text-gray-300 font-medium">Challenge pricing</div>
                    <div class="text-sm text-gray-500 mt-2">You choose tier</div>
                  </div>
                  <div class="bg-dark-800 rounded-2xl p-6 border border-brand-green/30 hover:border-brand-green/50 transition-colors relative overflow-hidden">
                    <div class="absolute inset-0 bg-brand-green/5"></div>
                    <div class="text-3xl font-bold text-brand-green mb-2 relative z-10">60%</div>
                    <div class="text-gray-300 font-medium relative z-10">You earn</div>
                    <div class="text-sm text-gray-500 mt-2 relative z-10">On all revenue</div>
                  </div>
                  <div class="bg-dark-800 rounded-2xl p-6 border border-white/5 hover:border-white/10 transition-colors">
                    <div class="text-3xl font-bold text-brand-blue mb-2">$19.99</div>
                    <div class="text-gray-300 font-medium">Membership price</div>
                    <div class="text-sm text-gray-500 mt-2">$12/mo you earn</div>
                  </div>
                </div>
              </div>
            </div>

            {/* 6-Week Challenge Revenue */}
            <div class="bg-dark-900 rounded-3xl p-8 md:p-10 border border-white/10 shadow-xl">
              <h3 class="text-2xl font-bold text-white mb-8 text-center">6-Week Challenge Revenue</h3>
              <p class="text-gray-400 text-center mb-8 max-w-2xl mx-auto">Run time-limited challenges that generate big one-time revenue. Choose pricing based on your community exclusivity.</p>
              <div class="grid md:grid-cols-3 gap-6 mb-8">
                <div class="bg-dark-800 rounded-2xl p-6 text-center border border-white/5">
                  <div class="text-3xl font-bold text-brand-blue mb-2">50 Participants</div>
                  <div class="text-2xl font-bold text-white mb-2">$1,410</div>
                  <div class="text-gray-400 text-sm mb-3">Per challenge (60% of $47)</div>
                  <div class="text-brand-green font-semibold bg-brand-green/10 py-1 px-3 rounded-full inline-block text-sm">$5,640/year</div>
                </div>
                <div class="bg-dark-800 rounded-2xl p-6 text-center border-2 border-brand-orange shadow-lg shadow-brand-orange/10 relative">
                  <div class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-brand-orange text-white text-xs font-bold px-3 py-1 rounded-full">POPULAR</div>
                  <div class="text-3xl font-bold text-brand-orange mb-2">250 Participants</div>
                  <div class="text-2xl font-bold text-white mb-2">$7,050</div>
                  <div class="text-gray-400 text-sm mb-3">Per challenge (60% of $47)</div>
                  <div class="text-brand-green font-semibold bg-brand-green/10 py-1 px-3 rounded-full inline-block text-sm">$28,200/year</div>
                </div>
                <div class="bg-dark-800 rounded-2xl p-6 text-center border border-white/5">
                  <div class="text-3xl font-bold text-brand-blue mb-2">1,000 Participants</div>
                  <div class="text-2xl font-bold text-white mb-2">$28,200</div>
                  <div class="text-gray-400 text-sm mb-3">Per challenge (60% of $47)</div>
                  <div class="text-brand-green font-semibold bg-brand-green/10 py-1 px-3 rounded-full inline-block text-sm">$112,800/year</div>
                </div>
              </div>
              <div class="bg-dark-800 rounded-xl p-4 border border-white/5 text-center">
                <p class="text-gray-400 text-sm">
                  <strong class="text-white">Pricing flexibility:</strong> Choose $47 (accessible), $97 (mid-tier), or $147 (premium) based on your community exclusivity
                </p>
              </div>
            </div>

            {/* Membership Conversion Revenue */}
            <div class="bg-dark-900 rounded-3xl p-8 md:p-10 border border-white/10 shadow-xl">
              <h3 class="text-2xl font-bold text-white mb-8 text-center">Membership Conversion Revenue</h3>
              <p class="text-gray-400 text-center mb-8 max-w-2xl mx-auto">40% of challenge participants convert to $19.99/month memberships, creating recurring revenue.</p>
              <div class="grid md:grid-cols-3 gap-6">
                <div class="bg-dark-800 rounded-2xl p-6 text-center border border-white/5">
                  <div class="text-xl font-bold text-brand-green mb-2">20 Converts</div>
                  <div class="text-2xl font-bold text-white mb-2">$240</div>
                  <div class="text-gray-400 text-sm mb-3">Monthly (60% of $19.99)</div>
                  <div class="text-brand-green font-semibold">$2,880/year</div>
                </div>
                <div class="bg-dark-800 rounded-2xl p-6 text-center border border-brand-blue/30 relative">
                  <div class="text-xl font-bold text-brand-blue mb-2">100 Converts</div>
                  <div class="text-2xl font-bold text-white mb-2">$1,199</div>
                  <div class="text-gray-400 text-sm mb-3">Monthly (60% of $19.99)</div>
                  <div class="text-brand-green font-semibold">$14,393/year</div>
                </div>
                <div class="bg-dark-800 rounded-2xl p-6 text-center border border-white/5">
                  <div class="text-xl font-bold text-brand-green mb-2">400 Converts</div>
                  <div class="text-2xl font-bold text-white mb-2">$4,797</div>
                  <div class="text-gray-400 text-sm mb-3">Monthly (60% of $19.99)</div>
                  <div class="text-brand-green font-semibold">$57,571/year</div>
                </div>
              </div>
              <p class="text-gray-500 text-center text-sm mt-6">From 50, 250, and 1,000 participant challenges respectively</p>
            </div>

            {/* Combined Annual Revenue */}
            <div class="bg-gradient-to-br from-brand-orange/10 to-brand-purple/10 rounded-3xl p-8 md:p-10 border border-white/10 shadow-xl">
              <h3 class="text-2xl font-bold text-white mb-8 text-center">Combined Annual Revenue</h3>
              <div class="grid md:grid-cols-3 gap-6">
                <div class="bg-dark-900/80 backdrop-blur-sm rounded-2xl p-6 text-center border border-white/5">
                  <div class="text-3xl font-bold text-brand-green mb-2">$8,520</div>
                  <div class="text-gray-300 mb-2 font-medium">50 participants</div>
                  <div class="text-sm text-gray-500">Challenges + Memberships</div>
                </div>
                <div class="bg-dark-900/80 backdrop-blur-sm rounded-2xl p-6 text-center border-2 border-brand-orange relative shadow-lg shadow-brand-orange/10">
                  <div class="text-3xl font-bold text-brand-green mb-2">$42,593</div>
                  <div class="text-gray-300 mb-2 font-medium">250 participants</div>
                  <div class="text-sm text-gray-500">Challenges + Memberships</div>
                </div>
                <div class="bg-dark-900/80 backdrop-blur-sm rounded-2xl p-6 text-center border border-white/5">
                  <div class="text-3xl font-bold text-brand-green mb-2">$170,371</div>
                  <div class="text-gray-300 mb-2 font-medium">1,000 participants</div>
                  <div class="text-sm text-gray-500">Challenges + Memberships</div>
                </div>
              </div>
              <p class="text-gray-400 text-center mt-8 text-lg">
                <strong class="text-white">Two-path revenue model:</strong> Big one-time challenge payments + recurring membership revenue
              </p>
            </div>

            {/* Setup Process */}
            <div class="bg-dark-900 rounded-3xl p-8 md:p-10 border border-white/5">
              <h3 class="text-2xl font-bold text-white mb-8 text-center">How to Get Started</h3>
              <div class="grid md:grid-cols-3 gap-8">
                <div class="text-center group">
                  <div class="w-16 h-16 mx-auto bg-dark-800 rounded-2xl border border-white/10 flex items-center justify-center text-3xl mb-4 group-hover:scale-110 transition-transform shadow-lg">ü§ñ</div>
                  <h4 class="text-lg font-bold text-white mb-2">1. Add Bot Free</h4>
                  <p class="text-gray-400 text-sm leading-relaxed">Add CalorieBot to your Discord server at no cost</p>
                </div>
                <div class="text-center group">
                  <div class="w-16 h-16 mx-auto bg-dark-800 rounded-2xl border border-white/10 flex items-center justify-center text-3xl mb-4 group-hover:scale-110 transition-transform shadow-lg">üí≥</div>
                  <h4 class="text-lg font-bold text-white mb-2">2. Connect Stripe</h4>
                  <p class="text-gray-400 text-sm leading-relaxed">Link your Stripe account for automatic commission payouts</p>
                </div>
                <div class="text-center group">
                  <div class="w-16 h-16 mx-auto bg-dark-800 rounded-2xl border border-white/10 flex items-center justify-center text-3xl mb-4 group-hover:scale-110 transition-transform shadow-lg">üí∞</div>
                  <h4 class="text-lg font-bold text-white mb-2">3. Earn Commissions</h4>
                  <p class="text-gray-400 text-sm leading-relaxed">Users subscribe for $20/month, you earn $12 automatically</p>
                </div>
              </div>
            </div>

            {/* CTA */}
            <div class="text-center">
              <a
                href="/affiliate/"
                class="inline-flex items-center gap-2 bg-brand-orange hover:bg-brand-orange/90 text-white font-bold py-4 px-10 rounded-full transition-all shadow-lg shadow-brand-orange/20 hover:shadow-brand-orange/40 hover:-translate-y-1"
                onclick="trackFeatureInteraction('Affiliate Program', 'learn_more_click')"
              >
                Learn About Affiliate Program
              </a>
            </div>
          </div>
        </div>

        <!-- Private Coaching Server Model -->
        <div id="private-model" class="mt-32">
          <div class="text-center mb-12">
            <div class="bg-dark-900/50 backdrop-blur-sm rounded-2xl p-8 border border-discord/30 mb-8 max-w-4xl mx-auto relative overflow-hidden">
              <div class="absolute inset-0 bg-discord/5"></div>
              <h2 class="text-4xl md:text-5xl font-bold text-white mb-2 relative z-10">
                <span class="text-discord">üè†</span> Private Coaching Server
              </h2>
            </div>
            <p class="text-xl text-gray-400 max-w-3xl mx-auto leading-relaxed">Build a premium coaching business where you set your own prices and keep 90%+ of revenue. Buy seats from CalorieBot at wholesale rates ($20 first + $12 each additional), then charge clients premium rates ($80-250/month). Perfect for personal trainers, nutrition coaches, and fitness entrepreneurs.</p>
          </div>
          <div class="grid gap-8 mx-auto">
            {/* Seat Pricing Structure */}
            <div class="bg-dark-900 rounded-3xl p-8 md:p-10 border border-discord/20 shadow-xl relative overflow-hidden group">
              <div class="absolute top-0 right-0 w-64 h-64 bg-discord/5 rounded-full blur-3xl -mr-32 -mt-32 group-hover:bg-discord/10 transition-all"></div>
              <div class="relative z-10">
                <div class="text-center mb-10">
                  <h3 class="text-3xl font-bold text-white mb-4">Seat Pricing Structure</h3>
                  <p class="text-xl text-gray-400">Buy seats wholesale, charge premium prices to clients</p>
                </div>

                <div class="grid md:grid-cols-3 gap-6 text-center">
                  <div class="bg-dark-800 rounded-2xl p-6 border border-white/5 hover:border-white/10 transition-colors">
                    <div class="text-3xl font-bold text-brand-blue mb-2">$20</div>
                    <div class="text-gray-300 font-medium">First seat cost</div>
                  </div>
                  <div class="bg-dark-800 rounded-2xl p-6 border border-white/5 hover:border-white/10 transition-colors">
                    <div class="text-3xl font-bold text-brand-blue mb-2">$12</div>
                    <div class="text-gray-300 font-medium">Each additional seat</div>
                  </div>
                  <div class="bg-dark-800 rounded-2xl p-6 border border-brand-green/30 hover:border-brand-green/50 transition-colors relative overflow-hidden">
                    <div class="absolute inset-0 bg-brand-green/5"></div>
                    <div class="text-3xl font-bold text-brand-green mb-2 relative z-10">$80-250</div>
                    <div class="text-gray-300 font-medium relative z-10">You charge clients</div>
                  </div>
                </div>
              </div>
            </div>

            {/* Coaching Business Examples */}
            <div class="bg-dark-900 rounded-3xl p-8 md:p-10 border border-white/5">
              <h3 class="text-2xl font-bold text-white mb-8 text-center">Coaching Business Examples</h3>
              <div class="grid md:grid-cols-3 gap-6">
                <div class="text-center p-6 bg-dark-800 rounded-2xl border border-white/5">
                  <div class="text-3xl font-bold text-brand-green mb-2">$3,750/mo</div>
                  <div class="text-white font-medium mb-2">25 clients √ó $150 avg</div>
                  <div class="text-sm text-gray-500">Seat cost: $320 ($3,430 profit)</div>
                </div>
                <div class="text-center p-6 bg-dark-800 rounded-2xl border border-brand-green/30 shadow-lg shadow-brand-green/5">
                  <div class="text-3xl font-bold text-brand-green mb-2">$8,750/mo</div>
                  <div class="text-white font-medium mb-2">50 clients √ó $175 avg</div>
                  <div class="text-sm text-gray-500">Seat cost: $620 ($8,130 profit)</div>
                </div>
                <div class="text-center p-6 bg-dark-800 rounded-2xl border border-white/5">
                  <div class="text-3xl font-bold text-brand-green mb-2">$15,000/mo</div>
                  <div class="text-white font-medium mb-2">75 clients √ó $200 avg</div>
                  <div class="text-sm text-gray-500">Seat cost: $920 ($14,080 profit)</div>
                </div>
              </div>
            </div>

            {/* Setup Process */}
            <div class="bg-dark-900 rounded-3xl p-8 md:p-10 border border-white/5">
              <h3 class="text-2xl font-bold text-white mb-8 text-center">How to Start Coaching Business</h3>
              <div class="grid md:grid-cols-3 gap-8">
                <div class="text-center group">
                  <div class="w-16 h-16 mx-auto bg-dark-800 rounded-2xl border border-white/10 flex items-center justify-center text-3xl mb-4 group-hover:scale-110 transition-transform shadow-lg">üè†</div>
                  <h4 class="text-lg font-bold text-white mb-2">1. Setup Private Server</h4>
                  <p class="text-gray-400 text-sm leading-relaxed">Create your Discord server and add CalorieBot</p>
                </div>
                <div class="text-center group">
                  <div class="w-16 h-16 mx-auto bg-dark-800 rounded-2xl border border-white/10 flex items-center justify-center text-3xl mb-4 group-hover:scale-110 transition-transform shadow-lg">üí∞</div>
                  <h4 class="text-lg font-bold text-white mb-2">2. Buy Seats</h4>
                  <p class="text-gray-400 text-sm leading-relaxed">$20 first seat + $12 each additional seat</p>
                </div>
                <div class="text-center group">
                  <div class="w-16 h-16 mx-auto bg-dark-800 rounded-2xl border border-white/10 flex items-center justify-center text-3xl mb-4 group-hover:scale-110 transition-transform shadow-lg">üë•</div>
                  <h4 class="text-lg font-bold text-white mb-2">3. Charge Premium</h4>
                  <p class="text-gray-400 text-sm leading-relaxed">$80-250/month with 90%+ profit margins</p>
                </div>
              </div>
            </div>

            {/* CTA */}
            <div class="text-center">
              <a
                href="/for-coaches/"
                class="inline-flex items-center gap-2 bg-discord hover:bg-discord/90 text-white font-bold py-4 px-10 rounded-full transition-all shadow-lg shadow-discord/20 hover:shadow-discord/40 hover:-translate-y-1"
                onclick="trackFeatureInteraction('Private Coaching Server', 'learn_more_click')"
              >
                Start Coaching Business
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
</Layout>



<script>
  // Fix TypeScript error by declaring the global interface
  declare global {
    interface Window {
      openContactModal: (modalId: string) => void;
      sa_event: (eventName: string, properties?: Record<string, any>) => void;
      gtag: (command: string, targetId: string, parameters?: Record<string, any>) => void;
    }
  }

  // GA4 Event Tracking Functions
  function trackPricingModelInterest(modelType: string, source: string) {
    if (typeof gtag !== 'undefined') {
      gtag('event', 'pricing_model_interest', {
        model_type: modelType,
        source: source,
        page_location: window.location.href,
        timestamp: new Date().toISOString()
      });
    }
  }

  function trackSectionNavigation(fromSection: string, toSection: string, method: string) {
    if (typeof gtag !== 'undefined') {
      gtag('event', 'section_navigation', {
        from_section: fromSection,
        to_section: toSection,
        navigation_method: method,
        page_location: window.location.href
      });
    }
  }

  function trackFeatureInteraction(featureName: string, interactionType: string) {
    if (typeof gtag !== 'undefined') {
      gtag('event', 'feature_interaction', {
        feature_name: featureName,
        interaction_type: interactionType,
        page_location: window.location.href
      });
    }
  }

  // Track pricing page discovery on page load
  document.addEventListener('DOMContentLoaded', function() {
    if (typeof gtag !== 'undefined') {
      gtag('event', 'pricing_discovery', {
        discovery_method: getPricingDiscoveryMethod(),
        referrer: document.referrer,
        page_location: window.location.href
      });
    }
  });

  function getPricingDiscoveryMethod(): string {
    const referrer = document.referrer;
    const currentUrl = window.location.href;

    // Check if direct navigation (no referrer or from external site)
    if (!referrer || referrer === '') {
      return 'direct_url';
    }

    // Check if from main navigation (internal navigation)
    if (referrer.includes(window.location.hostname)) {
      // Could be from nav or footer - this is a simplification
      // In a real implementation, you'd want to pass this from the nav link
      return 'main_nav_affiliate';
    }

    // External referrer
    return 'external_referral';
  }

  // Track scroll depth and section visibility
  let maxScrollDepth = 0;
  window.addEventListener('scroll', function() {
    const scrollTop = window.scrollY;
    const docHeight = document.documentElement.scrollHeight - window.innerHeight;
    const scrollPercent = Math.round((scrollTop / docHeight) * 100);

    if (scrollPercent > maxScrollDepth && scrollPercent % 25 === 0) {
      maxScrollDepth = scrollPercent;
      if (typeof gtag !== 'undefined') {
        gtag('event', 'scroll_depth', {
          scroll_depth: scrollPercent,
          page_location: window.location.href
        });
      }
    }
  });
</script>
